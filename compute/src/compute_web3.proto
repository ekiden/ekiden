syntax = "proto3";

package compute_web3;

service Compute {
    rpc Status (StatusRequest) returns (StatusResponse) {}
    rpc CallContract (CallContractRequest) returns (CallContractResponse) {}
}

message StatusRequest {
}

message StatusResponse {
    message Contract {
        // Contract name.
        string name = 1;
        // Contract version.
        string version = 2;
    }

    // Contract loaded in this compute node.
    Contract contract = 1;
}

message CallContractRequest {
    // Contract method.
    string method = 1;
    // Method dependent payload (Protocol Buffers serialized).
    bytes payload = 2;
    // Temporary: Encrypted contract state (Protocol Buffers serialized CiphertextAndNonce or empty).
    // TODO: remove this when compute nodes fetch and store state themselves
    bytes encrypted_state = 103;
}

message CallContractResponse {
    // Method dependent payload (Protocol Buffers serialized).
    bytes payload = 1;
    // Temporary: Encrypted contract state (Protocol Buffers serialized CiphertextAndNonce or empty).
    // TODO: remove this when compute nodes fetch and store state themselves
    bytes encrypted_state = 103;
}
